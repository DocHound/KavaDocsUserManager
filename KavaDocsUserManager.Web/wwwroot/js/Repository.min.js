var vm={},app;vm={repository:{},newUser:{awesomplete:null,username:"",type:"contributor",visible:!1,userList:[],getName:function(n){return n.name},getUserSearchList:function(n){n.key!="ArrowDown"&&n.Key!="ArrowUp"&&n.Key!="Enter"&&((console.log("user search list"+new Date,n),!vm.newUser.username||vm.newUser.username.length<2)||ajaxJson("/api/repositories/searchusers/"+vm.newUser.username,null,function(n){console.log(n);vm.newUser.userList=n;vm.newUser.awesomplete.list=n},function(){},{method:"GET"}))}},initialize:function(){vm.repository=globals.repository;$("#Repository_Prefix").focus()},highlightCode:function(){$("pre code").each(function(n,t){hljs.highlightBlock(t)})},editCodeField:function(n,t){var i=$("#"+n),r=$("#"+t);r.show();r.height(i.height());i.hide()},hideCodeField:function(n,t){var i=$("#"+n),r=$("#"+t);r.hide();i.show();i.html(r.val());setTimeout(vm.highlightCode,10)},optionalFieldSelection:function(n){var r=$(n.currentTarget),i=r.val(),t;$(".optional-field-group textarea.code-editing").addClass("hidden");t=$("#"+i);console.log(t,i);t.removeClass("hidden")},addUserToRepo:function(n,t){ajaxJson("/api/repositories/"+n.id+"/add/"+t,null,function(t){n.users.push(t);vm.newUser.visible=!1;vm.newUser.username=null},function(n){vm.status(n.message)})},removeUserFromRepo:function(n,t){ajaxJson("/api/repositories/"+t.id+"/remove/"+n.id,null).then(function(){t.users=t.users.filter(function(t){return t.user!==n})},function(n){vm.status("Updated failed: "+n.message)})},deleteRepository:function(){confirm("Are you sure you want to delete this repository?")&&ajaxJson("/api/repositories/"+vm.repository.id,null,function(){window.location="/repositories"},function(n){status(n.message)},{method:"DELETE"})},status:function(n){n&&alert(n)}};vm.initialize();app=new Vue({el:"#RepositoryPage",data:function(){return vm}});setTimeout(function(){var n=document.getElementById("UserToAdd");vm.newUser.awesomplete=new Awesomplete(n,{list:vm.newUser.userList,selectcomplete:function(n){console.writeline(n);vm.newUser.searchname=n.text}});n.addEventListener("awesomplete-selectcomplete",function(n){var t=n.text;vm.newUser.username=t.value})},2e3);