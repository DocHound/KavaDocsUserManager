var vm={},app;vm={repository:{},newUser:{username:"Phantomias",type:"contributor",visible:!1},initialize:function(){vm.repository=globals.repository},highlightCode:function(){$("pre code").each(function(n,t){hljs.highlightBlock(t)})},editCodeField:function(n,t){var i=$("#"+n),r=$("#"+t);r.show();r.height(i.height());i.hide()},hideCodeField:function(n,t){var i=$("#"+n),r=$("#"+t);r.hide();i.show();i.html(r.val());setTimeout(vm.highlightCode,10)},addUserToRepo:function(n,t){ajaxJson("/api/repositories/"+n.id+"/add/"+t,null,function(t){n.users.push(t);vm.newUser.visible=!1;vm.newUser.username=null},function(){vm.status("Unable to add user")})},removeUserFromRepo:function(n,t){ajaxJson("/api/repositories/"+t.id+"/remove/"+n.id,null).then(function(){t.users=t.users.filter(function(t){return t.user!==n})},function(n){vm.status("Updated failed: "+n.message)})},status:function(n){n&&alert(n)}};vm.initialize();app=new Vue({el:"#RepositoryPage",data:function(){return vm}});